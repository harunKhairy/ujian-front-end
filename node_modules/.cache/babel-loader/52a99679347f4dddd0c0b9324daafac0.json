{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HARUN\\\\Documents\\\\GitHub\\\\ujian-front-end\\\\src\\\\pages\\\\Cart.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Axios from 'axios';\nimport { API_URL } from './../supports/ApiUrl';\nimport { Table } from 'reactstrap';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nconst MySwal = withReactContent(Swal);\n\nclass Cart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isicart: []\n    };\n\n    this.getdata = () => {\n      Axios.get(`${API_URL}/transactions?_embed=transactiondetails&userId=${this.props.User.id}&status=oncart`).then(res => {\n        // console.log(res)\n        // console.log(res.data[0].transactiondetails)\n        var newarrforprod = [];\n        res.data[0].transactiondetails.forEach(element => {\n          newarrforprod.push(Axios.get(`${API_URL}/products/${element.productId}`));\n        }); // console.log(newarrforprod)\n\n        Axios.all(newarrforprod).then(res2 => {\n          // console.log(res2)\n          res2.forEach((val, index) => {\n            res.data[0].transactiondetails[index].dataprod = val.data;\n          });\n          console.log(res.data[0].transactiondetails);\n          this.setState({\n            isicart: res.data[0].transactiondetails\n          });\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.renderisidata = () => {\n      return this.state.isicart.map((val, index) => {\n        return React.createElement(\"tr\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, index + 1), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, val.dataprod.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: val.dataprod.image,\n          height: \"200\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, val.qty), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: () => this.deleteconfirm(index, val.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, \"Delete\")));\n      });\n    };\n\n    this.deleteconfirm = (index, id) => {\n      MySwal.fire({\n        title: `Are you sure wanna delete ${this.state.isicart[index].dataprod.name} ?`,\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.value) {\n          Axios.delete(`${API_URL}/transactiondetails/${id}`).then(res => {\n            MySwal.fire('Deleted!', 'Your file has been deleted.', 'yah, nanti sold out').then(result => {\n              if (result.value) {\n                this.getdata();\n              }\n            });\n          }).catch(err => {\n            console.log(err);\n          });\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getdata();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"paddingatas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Table, {\n      striped: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"No.\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Nama\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"foto\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"qty\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Hapus\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, this.renderisidata())));\n  }\n\n}\n\nconst MapstatetoProps = state => {\n  return {\n    User: state.Auth\n  };\n};\n\nexport default connect(MapstatetoProps)(Cart);","map":{"version":3,"sources":["C:/Users/HARUN/Documents/GitHub/ujian-front-end/src/pages/Cart.jsx"],"names":["React","Component","connect","Axios","API_URL","Table","Swal","withReactContent","MySwal","Cart","state","isicart","getdata","get","props","User","id","then","res","newarrforprod","data","transactiondetails","forEach","element","push","productId","all","res2","val","index","dataprod","console","log","setState","catch","err","renderisidata","map","name","image","qty","deleteconfirm","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","value","delete","componentDidMount","render","MapstatetoProps","Auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {connect} from 'react-redux'\r\nimport Axios from 'axios'\r\nimport {API_URL} from './../supports/ApiUrl'\r\nimport {Table} from 'reactstrap'\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\nconst MySwal = withReactContent(Swal)\r\nclass Cart extends Component {\r\n    state = {\r\n        isicart:[]\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getdata()\r\n    }\r\n\r\n    getdata=()=>{\r\n        Axios.get(`${API_URL}/transactions?_embed=transactiondetails&userId=${this.props.User.id}&status=oncart`)\r\n        .then((res)=>{\r\n            // console.log(res)\r\n            // console.log(res.data[0].transactiondetails)\r\n            var newarrforprod=[]\r\n            res.data[0].transactiondetails.forEach(element => {\r\n               newarrforprod.push(Axios.get(`${API_URL}/products/${element.productId}`)) \r\n            });\r\n            // console.log(newarrforprod)\r\n            Axios.all(newarrforprod)\r\n            .then((res2)=>{\r\n                // console.log(res2)\r\n                res2.forEach((val,index)=>{\r\n                    res.data[0].transactiondetails[index].dataprod=val.data\r\n                })\r\n                console.log(res.data[0].transactiondetails)\r\n                this.setState({isicart:res.data[0].transactiondetails})\r\n            })\r\n        }).catch((err)=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    renderisidata=()=>{\r\n        return this.state.isicart.map((val,index)=>{\r\n            return (\r\n                <tr key={index}>\r\n                    <td>{index+1}</td>\r\n                    <td>{val.dataprod.name}</td>\r\n                    <td ><img src={val.dataprod.image} height='200' alt=\"\"/></td>\r\n                    <td >{val.qty}</td>\r\n                    <td><button className='btn btn-danger' onClick={()=>this.deleteconfirm(index,val.id)}>Delete</button></td>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n    deleteconfirm=(index,id)=>{\r\n        MySwal.fire({\r\n            title: `Are you sure wanna delete ${this.state.isicart[index].dataprod.name} ?`,\r\n            text: \"You won't be able to revert this!\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete it!'\r\n          }).then((result) => {\r\n            if (result.value) {\r\n              Axios.delete(`${API_URL}/transactiondetails/${id}`)\r\n              .then((res)=>{\r\n                  MySwal.fire(\r\n                    'Deleted!',\r\n                    'Your file has been deleted.',\r\n                    'yah, nanti sold out'\r\n                  ).then((result)=>{\r\n                      if(result.value){\r\n                          this.getdata()\r\n                      }\r\n                  })\r\n              }).catch((err)=>{\r\n                  console.log(err)\r\n              }) \r\n            }\r\n          })\r\n    }\r\n    render() { \r\n        return (\r\n            <div className='paddingatas'>\r\n                <Table striped>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>No.</th>\r\n                            <th>Nama</th>\r\n                            <th>foto</th>\r\n                            <th>qty</th>\r\n                            <th>Hapus</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.renderisidata()}\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n          );\r\n    }\r\n}\r\nconst MapstatetoProps=(state)=>{\r\n    return{\r\n        User:state.Auth\r\n    }\r\n}\r\nexport default connect(MapstatetoProps) (Cart);\r\n"]},"metadata":{},"sourceType":"module"}