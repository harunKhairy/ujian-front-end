{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HARUN\\\\Documents\\\\GitHub\\\\ujian-front-end\\\\src\\\\pages\\\\productdetail.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport Axios from 'axios';\nimport { API_URL } from '../supports/ApiUrl';\nimport { changetoRupiah } from './../supports/changeToRp';\nimport { connect } from 'react-redux';\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport { Redirect } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nconst MySwal = withReactContent(Swal);\n\nconst ProductDetail = props => {\n  const [data, setdata] = useState({});\n  const [qty, setqty] = useState(1);\n  const [modalopen, setmodalopen] = useState(false);\n  const [redirectlog, setredirectlog] = useState(false);\n  useEffect(() => {\n    //sama dengan didmount\n    Axios.get(`${API_URL}/products/${props.match.params.idprod}`).then(res => {\n      console.log(res.data);\n      setdata(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const qtychange = e => {\n    if (e.target.value === '') {\n      setqty(0);\n    }\n\n    if (Number(e.target.value)) {\n      if (qty === 0) {\n        setqty(e.target.value[1]);\n      } else {\n        if (e.target.value > stok) {\n          //jika valuenya lebih besar maka qtynya akan maksimal\n          setqty(stok);\n        } else if (e.target.value < 1) {\n          setqty(1);\n        } else {\n          // console.log(e.target.defaultValue)\n          setqty(e.target.value);\n        }\n      }\n    }\n  };\n\n  const sendToCart = () => {\n    if (props.User.islogin && props.User.role === 'user') {\n      var objtransaction = {\n        status: 'oncart',\n        userId: props.User.id\n      };\n      Axios.get(`${API_URL}/transactions?status=oncart&userId=${props.User.id}`).then(res1 => {\n        if (res1.data.length) {\n          var objdetails = {\n            transactionId: res1.data[0].id,\n            productId: data.id,\n            qty: qty\n          };\n          Axios.post(`${API_URL}/transactiondetails`, objdetails).then(res3 => {\n            console.log(res3.data);\n            MySwal.fire({\n              icon: 'success',\n              title: 'Berhasil masuk cart' // text: 'barang masuk ke cart',\n\n            });\n          });\n        } else {\n          Axios.post(`${API_URL}/transactions`, objtransaction).then(res2 => {\n            var objdetails = {\n              transactionId: res2.data.id,\n              productId: data.id,\n              qty: qty\n            };\n            Axios.post(`${API_URL}/transactiondetails`, objdetails).then(res3 => {\n              console.log(res3.data);\n              MySwal.fire({\n                icon: 'success',\n                title: 'Berhasil masuk cart' // text: 'barang masuk ke cart',\n\n              });\n            });\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      setmodalopen(true);\n    }\n  };\n\n  const onToLoginClick = () => {\n    if (props.User.role === 'admin') {\n      setmodalopen(false);\n    } else {\n      setmodalopen(false);\n      setredirectlog(true);\n    }\n  };\n\n  const {\n    name,\n    image,\n    seen,\n    stok,\n    harga\n  } = data;\n\n  if (redirectlog) {\n    return React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    });\n  }\n\n  if (data) {\n    return React.createElement(\"div\", {\n      className: \"paddingatas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      centered: true,\n      toggle: () => setmodalopen(false),\n      isOpen: modalopen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, props.User.role === 'admin' ? 'maaf anda admin' : 'Maaf Anda harus login dahulu'), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: onToLoginClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"OK\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-4 p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-detail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: image,\n      alt: name,\n      width: \"100%\",\n      className: \"rounded\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-8 p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"border-headerdetail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"font-weight-bolder font-nameprod\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, name), React.createElement(\"div\", {\n      className: \"font-typographysmall\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"font-weight-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, 0, \"\\xA0X\"), \" dibeli\")), React.createElement(\"div\", {\n      className: \"border-headerdetail\",\n      style: {\n        lineHeight: '80px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-1 font-typographymed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Stok\"), React.createElement(\"div\", {\n      className: \"col-md-11\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, stok, \"pcs\"))), React.createElement(\"div\", {\n      className: \" border-headerdetail\",\n      style: {\n        lineHeight: '80px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        verticalAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-1 font-typographymed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Harga\"), React.createElement(\"div\", {\n      className: \"col-md-11 font-harga\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, changetoRupiah(harga * qty)))), React.createElement(\"div\", {\n      className: \" border-headerdetail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-1 font-typographymed py-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Jumlah\"), React.createElement(\"div\", {\n      className: \"col-md-11 d-flex py-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      disabled: qty <= 1 ? true : false,\n      onClick: () => setqty(qty - 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"-\"), React.createElement(\"div\", {\n      className: \"rounded\",\n      style: {\n        border: '1px black solid'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      style: {\n        width: '100px',\n        height: '60px',\n        textAlign: 'center',\n        backgroundColor: 'transparent',\n        border: '0px'\n      },\n      value: qty,\n      onChange: qtychange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      disabled: qty >= stok ? true : false,\n      onClick: () => setqty(parseInt(qty) + 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"+\")))), React.createElement(\"div\", {\n      className: \" border-headerdetail\",\n      style: {\n        lineHeight: '80px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: sendToCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Beli\")))));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"paddingatas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, \"loadingg...\");\n};\n\nconst MapstatetoProps = state => {\n  return {\n    User: state.Auth\n  };\n};\n\nexport default connect(MapstatetoProps)(ProductDetail);","map":{"version":3,"sources":["C:/Users/HARUN/Documents/GitHub/ujian-front-end/src/pages/productdetail.jsx"],"names":["React","useEffect","useState","Axios","API_URL","changetoRupiah","connect","Modal","ModalBody","ModalFooter","Redirect","Swal","withReactContent","MySwal","ProductDetail","props","data","setdata","qty","setqty","modalopen","setmodalopen","redirectlog","setredirectlog","get","match","params","idprod","then","res","console","log","catch","err","qtychange","e","target","value","Number","stok","sendToCart","User","islogin","role","objtransaction","status","userId","id","res1","length","objdetails","transactionId","productId","post","res3","fire","icon","title","res2","onToLoginClick","name","image","seen","harga","lineHeight","verticalAlign","border","width","height","textAlign","backgroundColor","parseInt","MapstatetoProps","state","Auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Axios from 'axios';\r\nimport { API_URL } from '../supports/ApiUrl';\r\nimport {changetoRupiah} from './../supports/changeToRp'\r\nimport {connect} from 'react-redux'\r\nimport {Modal,ModalBody,ModalFooter} from 'reactstrap'\r\nimport {Redirect} from 'react-router-dom'\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\nconst MySwal = withReactContent(Swal)\r\n\r\nconst ProductDetail =(props)=>{\r\n\r\n    const [data,setdata]=useState({})\r\n    const [qty,setqty]=useState(1)\r\n    const [modalopen,setmodalopen]=useState(false)\r\n    const [redirectlog,setredirectlog]=useState(false)\r\n\r\n    useEffect(()=>{//sama dengan didmount\r\n        Axios.get(`${API_URL}/products/${props.match.params.idprod}`)\r\n        .then((res)=>{\r\n            console.log(res.data)\r\n            setdata(res.data)\r\n        }).catch((err)=>{\r\n            console.log(err)\r\n        })\r\n    },[])\r\n    \r\n    const qtychange=(e)=>{\r\n        if(e.target.value===''){\r\n            setqty(0)\r\n        }\r\n        if(Number(e.target.value)){\r\n            if(qty===0){\r\n                setqty( e.target.value[1])\r\n            }else{\r\n                if(e.target.value>stok){//jika valuenya lebih besar maka qtynya akan maksimal\r\n                    setqty(stok)\r\n                }else if(e.target.value<1){\r\n                    setqty(1)\r\n                }\r\n                else{\r\n                    // console.log(e.target.defaultValue)\r\n                    setqty(e.target.value)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const sendToCart=()=>{\r\n        if(props.User.islogin&&props.User.role==='user'){\r\n            var objtransaction={\r\n                status:'oncart',\r\n                userId:props.User.id\r\n            }\r\n            Axios.get(`${API_URL}/transactions?status=oncart&userId=${props.User.id}`)\r\n            .then((res1)=>{\r\n                if(res1.data.length){\r\n                    var objdetails={\r\n                        transactionId:res1.data[0].id,\r\n                        productId:data.id,\r\n                        qty:qty\r\n                    }\r\n                    Axios.post(`${API_URL}/transactiondetails`,objdetails)\r\n                    .then((res3)=>{\r\n                        console.log(res3.data)\r\n                        MySwal.fire({\r\n                            icon: 'success',\r\n                            title: 'Berhasil masuk cart',\r\n                            // text: 'barang masuk ke cart',\r\n                          })\r\n                    })\r\n                }else{\r\n                    Axios.post(`${API_URL}/transactions`,objtransaction)\r\n                    .then((res2)=>{\r\n                        var objdetails={\r\n                            transactionId:res2.data.id,\r\n                            productId:data.id,\r\n                            qty:qty\r\n                        }\r\n                        Axios.post(`${API_URL}/transactiondetails`,objdetails)\r\n                        .then((res3)=>{\r\n                            console.log(res3.data)\r\n                            MySwal.fire({\r\n                                icon: 'success',\r\n                                title: 'Berhasil masuk cart',\r\n                                // text: 'barang masuk ke cart',\r\n                              })\r\n                        })\r\n                    })\r\n                }\r\n            }).catch((err)=>{\r\n                console.log(err)\r\n            })\r\n        }else{\r\n            setmodalopen(true)\r\n        }\r\n    }\r\n    const onToLoginClick=()=>{\r\n        if(props.User.role==='admin'){\r\n            setmodalopen(false)\r\n        }else{\r\n            setmodalopen(false)\r\n            setredirectlog(true)\r\n        }\r\n\r\n    }\r\n    const {name,image,seen,stok,harga}=data\r\n    if(redirectlog){\r\n        return <Redirect to='/login'/>\r\n    }\r\n    if(data){\r\n        return(\r\n            <div className='paddingatas'>\r\n                <Modal centered toggle={()=>setmodalopen(false)} isOpen={modalopen}>\r\n                    <ModalBody>\r\n                        {\r\n                            props.User.role==='admin'?\r\n                            'maaf anda admin'\r\n                            :\r\n                            'Maaf Anda harus login dahulu'\r\n                        }\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <button className='btn btn-primary' onClick={onToLoginClick}>OK</button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4 p-2\">\r\n                        <div className=\"product-detail\">\r\n                            <img src={image} alt={name} width='100%' className='rounded'/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-8 p-2\">\r\n                        <div className='border-headerdetail'>\r\n                            <div className='font-weight-bolder font-nameprod'>\r\n                                {name}\r\n                            </div>\r\n                            <div className='font-typographysmall'>\r\n                                <span className='font-weight-bold'>{0}&nbsp;X</span> dibeli\r\n                            </div>\r\n                        </div>\r\n                        <div className='border-headerdetail' style={{lineHeight:'80px'}}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-md-1 font-typographymed\">\r\n                                   Stok\r\n                                </div>\r\n                                <div className=\"col-md-11\">\r\n                                    {stok}pcs\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=' border-headerdetail' style={{lineHeight:'80px'}}>\r\n                            <div className=\"row\" style={{verticalAlign:'center'}}>\r\n                                <div className=\"col-md-1 font-typographymed\" >\r\n                                   Harga\r\n                                </div>\r\n                                <div className=\"col-md-11 font-harga\">\r\n                                    {changetoRupiah(harga*qty)}\r\n                                </div>                               \r\n                            </div>\r\n                        </div>\r\n                        <div className=' border-headerdetail' >\r\n                            <div className=\"row\" >\r\n                                <div className=\"col-md-1 font-typographymed py-3\">\r\n                                   Jumlah\r\n                                </div>\r\n                                <div className=\"col-md-11 d-flex py-2\">\r\n                                    <button className='btn btn-primary' disabled={qty<=1?true:false} onClick={()=>setqty(qty-1)}>-</button>\r\n                                    <div className='rounded' style={{border:'1px black solid'}} >\r\n                                        <input \r\n                                            type=\"text\" \r\n                                            style={{width:'100px',height:'60px',textAlign:'center',backgroundColor:'transparent',border:'0px'}} \r\n                                            value={qty} \r\n                                            onChange={qtychange}\r\n                                        />\r\n                                    </div>\r\n                                    <button className='btn btn-primary' disabled={qty>=stok?true:false} onClick={()=>setqty(parseInt(qty)+1)}>+</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=' border-headerdetail' style={{lineHeight:'80px'}}>\r\n                            <button className='btn btn-success' onClick={sendToCart}>Beli</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    return <div className='paddingatas'>loadingg...</div>\r\n}\r\nconst MapstatetoProps=(state)=>{\r\n    return{\r\n        User:state.Auth\r\n    }\r\n}\r\n\r\nexport default connect(MapstatetoProps) (ProductDetail);"]},"metadata":{},"sourceType":"module"}